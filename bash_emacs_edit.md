# BASH READLINE EMACS EDIT MODE

#### 모드 설정하기
* `$ set -o emacs` : emacs 모드로 설정한다.
* `$ set -o vi` : vi 모드로 설정한다.
> 기본값은 emacs.

* 이 문서는 커맨드라인에서 emacs 모드를 사용하는 경우를 설명한다.

#### `C-문자` 와 `M-문자` 에 대하여
* `C-문자` 는 `CTRL+문자` 를 의미한다.
* `M-문자` 는 `META+문자` 를 의미한다.

##### `META` 키에 대하여
* `META`키는 개인용 컴퓨터가 존재하지 않았던 시절에 터미널 제조사에 따라 `ALT`키의 개념이 통일되지 않았을 때 나온 키 값으로, 요즘은 그냥 `ALT`키라고 생각하면 된다.
* 만약 `META` 키가 없는 터미널에서 `META` 키를 입력하려면 `<ESC>`키를 누르면 된다.
> `M-c`를 입력하고 싶다면 `<ESC>`를 누르고, `c`를 누르면 된다.

* `option`키 조합이 특수문자 입력인 mac 터미널에서는 `<ESC>`를 사용하면 된다.
* iTerm2 에서 `META`키를 사용하고 싶다면 `Preferences > Profiles > Keys`에서 `option`키를 `+Esc`로 매핑해주면 된다.
> 하지만 이렇게 하면 VIM에서 `option`키를 사용하기 난감해진다. MacVIM에서 `macmeta`를 쓰거나 다른 방식으로 `option`키를 쓰고 있다면 `+Esc` 설정이 더 불편할 수 있기 때문에, 차라리 `$ set -o vi` 사용이 낫다고 본다.

#### 이동 키 모음

| 키        | 같은 기능 키 | 설명                                                                  | vi 라면?   |
| --------- | -------      | :----------------------------------------------                       | ---------- |
| `C-a`     | `<HOME>`     | 가장 왼쪽으로 커서를 이동시킨다.                                      | `0`        |
| `C-e`     | `<END>`      | 가장 오른쪽으로 커서를 이동시킨다.                                    | `$`        |
| `C-f`     | ←            | forward. 왼쪽으로 한 칸 이동한다.                                     | `h`        |
| `C-b`     | →            | backward. 오른쪽으로 한 칸 이동한다.                                  | `l`        |
| `C-p`     | ↑            | previous. 이전 히스토리.                                              | `k`        |
| `C-n`     | ↓            | next. 다음 히스토리.                                                  | `j`        |
| `M-f`     | ⌥→           | 다음 단어로 이동한다.                                                 | `w`        |
| `M-b`     | ⌥←           | 이전 단어로 이동한다.                                                 | `b`        |
| `M-숫자`  |              | 숫자 파라미터를 입력한다. 가령, `M-3 M-b`는 3 단어 이전으로 이동한다. | `숫자`     |

> `C-f`,`C-b`,`C-n`,`C-p` 는 emacs 에서 방향키의 역할을 한다.

#### 편집 키 모음

| 키           | 설명                                                                | vi 라면?    |
| ---------    | :----------------------------------------------                     | ----------  |
| `C-l`        | 화면 전체를 지운다. clear 명령과 같다.                              |             |
| `C-d`        | 커서 상의 글자를 하나 지운다. `<DELETE>`키와 같다.                  | `x`         |
| `C-h`        | 커서 왼쪽의 글자를 하나 지운다. `<BS>`키(백 스페이스)와 같다.       | `X`         |
| `M-u`        | 현재 커서가 위치한 곳부터 단어 경계까지 upper case 한다.            | `vwgU`      |
| `M-l`        | 현재 커서가 위치한 곳부터 단어 경계까지 lower case 한다.            | `vwgu`      |
| `C-k`        | 커서 뒤쪽의 모든 문자를 삭제한다. VIM의 `d$`와 같다.                | `D`         |
| `C-u`        | 커서 앞쪽의 모든 문자를 삭제한다. VIM의 `d0`과 같다.                | `d0`        |
| `M-d`        | 현재 커서가 위치한 곳부터 뒤쪽 단어 경계까지 삭제한다.              | `dw`        |
| `C-w`        | 현재 커서가 위치한 곳부터 앞쪽 단어 경계까지 삭제한다.              | `db`        |
| `M-\`        | 현재 커서가 위치한 연속되는 공백을 한번에 삭제한다.                 | `bdw`       |
| `C-y`        | `C-w`, `C-u` 등으로 삭제한 가장 최근 문자열을 붙여넣는다.           | `p`         |
| `C-x (`      | 키 매크로 녹음 시작.                                                | `q레지스터` |
| `C-x )`      | 키 매크로 녹음 종료.                                                | `q`         |
| `C-x e`      | 키 매크로 실행. 연속적인 단순 명령을 여러 번 반복해야 할 때 편하다. | `@레지스터` |
| `C-r`        | 명령어 히스토리를 역순으로 불러온다.                                |             |
| `C-_`        | undo. 실행 취소.                                                    | `u`         |
| `C-x C-u`    | undo. 실행 취소.                                                    | `u`         |
| `C-] 문자`   | 오른쪽으로 문자 검색을 하여, 커서를 해당 문자 위로 이동시켜준다.    | `f문자`     |
| `M-C-] 문자` | 왼쪽으로 문자 검색을 하여, 커서를 해당 문자 위로 이동시켜준다.      | `F문자`     |
| `M-#`        | 현재 타이핑중인 커맨드라인 앞에 # 을 추가하여 주석처리 한다.        | `I#`        |

#### 자주 쓰는 편집 키 모음
* 개인적으로 선호하는 편집 키 모음이다. 이동 키는 생략했다.
* 작성된 소스코드를 수정하는 것이 아니라, 명령어를 빠르게 입력하는 것이 편리하기 때문에 왼쪽으로 삭제하는 조합을 자주 사용하게 된다.

| 키           | 설명                                                                |
| ---------    | :----------------------------------------------                     |
| `C-w`        | 현재 커서가 위치한 곳부터 앞쪽 단어 경계까지 삭제한다.              |
| `C-u`        | 커서 앞쪽의 모든 문자를 삭제한다. VIM의 `d0`과 같다.                |
| `C-l`        | 화면 전체를 지운다. clear 명령과 같다.                              |
| `C-h`        | 커서 왼쪽의 글자를 하나 지운다. `<BS>`키(백 스페이스)와 같다.       |
| `C-r`        | 명령어 히스토리를 역순으로 불러온다.                                |
| `C-_`        | undo. 실행 취소.                                                    |
| `M-#`        | 현재 타이핑중인 커맨드라인 앞에 # 을 추가하여 주석처리 한다.        |

* 아주 긴 명령어를 작성하는 경우
    * 실수한 것 같은 때는 `M-#`, 즉 `<ESC>#`을 입력해 주석처리 한 다음 `C-p`로 바로 불러와 편집하면 편리하다.
    * vi 모드에서 `v`를 입력하면 vi 에서 명령어를 편집하고, `:wq`로 실행할 수 있다. 선호하는 방식.

#### 참고 자료
* https://www.gnu.org/software/bash/manual/html_node/Command-Line-Editing.html
